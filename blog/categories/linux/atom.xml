<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | ktkr3d]]></title>
  <link href="http://ktkr3d.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://ktkr3d.github.io/"/>
  <updated>2013-12-30T10:23:47+09:00</updated>
  <id>http://ktkr3d.github.io/</id>
  <author>
    <name><![CDATA[ktkr3d]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Remote Blogging with Octopress]]></title>
    <link href="http://ktkr3d.github.io/blog/2013/12/30/remote-blogging-with-octopress/"/>
    <updated>2013-12-30T10:09:00+09:00</updated>
    <id>http://ktkr3d.github.io/blog/2013/12/30/remote-blogging-with-octopress</id>
    <content type="html"><![CDATA[<p>モバイルPC からGitHub 上に構築したOctopress を更新してみます。</p>

<!-- more -->


<h4>ホストPC のディスクをsshfs でマウント</h4>

<p><code>bash
$ ssh-keygen
$ ssh-copy-id -i ~/.ssh/id_rsa.pub username@hostnmae -p 22222
$ ssh username@hostname -p 22222
$ sshfs username@hostname:/mnt/common /mnt/common -p 22222 -o reconnect
</code></p>

<h4>Ruby のインストール</h4>

<p><code>bash
$ curl -L https://get.rvm.io | bash -s stable --ruby
$ rvm install 1.9.3
$ rvm use 1.9.3
$ rvm rubygems latest
$ cd /mnt/common/github/octopress
$ bundle install
</code></p>

<h4>.bashrc の設定</h4>

<p><code>bash .bashrc
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
source /home/m/.rvm/scripts/rvm
</code></p>

<h4>Git の設定</h4>

<p><code>bash
$ git config --global user.name "username"
$ git config --global user.email mail_account_name@mail_domain_name
</code></p>

<h4>GitHub の設定</h4>

<p>GitHub にログインして~/.ssh/id_rsa.pub を登録</p>

<h4>Octopress Helper の設定</h4>

<p><a href="http://ktkr3d.github.io/blog/2013/10/08/yad/">http://ktkr3d.github.io/blog/2013/10/08/yad/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cleaning]]></title>
    <link href="http://ktkr3d.github.io/blog/2013/12/29/cleaning/"/>
    <updated>2013-12-29T12:40:00+09:00</updated>
    <id>http://ktkr3d.github.io/blog/2013/12/29/cleaning</id>
    <content type="html"><![CDATA[<p>年末だし、ハードディスクの中の重複したファイルを見つけて、削除してしまおう。</p>

<!-- more -->


<h4>対象とするファイル</h4>

<ul>
<li>ファイルサイズが大きめ</li>
<li>不完全なファイルも存在する</li>
<li>ディレクトリ階層を再帰的に検索</li>
</ul>


<p>そのため、先頭1MB を対象としたハッシュ比較により、ファイルの同一性を検出します。</p>

<h4>スクリプト</h4>

<p>``` bash ~/test.sh</p>

<h1>!/bin/sh</h1>

<p>cp /dev/null /tmp/list0.txt
find . -type f -exec dd if={} bs=1024 count=1000 of=/tmp/work.bin \; -exec md5sum /tmp/work.bin >> /tmp/list0.txt \; -exec du {}  >> /tmp/list0.txt \;
sed &lsquo;:loop; N; $!b loop; ;s/\/tmp\/work.bin\n//g&rsquo; /tmp/list0.txt > /tmp/list1.txt
sort /tmp/list1.txt | uniq -D -w 32  > /tmp/list2.txt
rm /tmp/work.bin /tmp/list0.txt
```</p>

<h4>スクリプトの実行</h4>

<p><code>bash
$ cd /PATH/TO/TARGET
$ time ~/test.sh
</code></p>

<h4>実行結果</h4>

<table>
<thead>
<tr>
<th align="left">出力されるファイル</th>
<th align="left">内容</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">/tmp/list1.txt</td>
<td align="left">ハッシュとサイズとパス</td>
</tr>
<tr>
<td align="left">/tmp/list2.txt</td>
<td align="left">重複しているファイルの一覧</td>
</tr>
</tbody>
</table>


<h3>ファイルの削除</h3>

<p>ファイルのサイズとディレクトリを参照して冗長なファイルを削除します。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Add remote location over SSH on XBMC]]></title>
    <link href="http://ktkr3d.github.io/blog/2013/12/22/add-remote-location-over-ssh-on-xbmc/"/>
    <updated>2013-12-22T10:50:00+09:00</updated>
    <id>http://ktkr3d.github.io/blog/2013/12/22/add-remote-location-over-ssh-on-xbmc</id>
    <content type="html"><![CDATA[<p><a href="http://ktkr3d.github.io/images/xbmc-ssh.png"><img src="/images/xbmc-ssh.png"></a></p>

<p>外出先から自宅のPC に格納しているメディアにアクセスするためにXBMC を設定してみました。</p>

<!-- more -->


<p>Android やモバイルLinux にインストールしたXBMC からSSH 経由で自宅PC のメディアにアクセスするには、<code>Add network location</code> で <code>Secure Shell (SSH/SFTP)</code> プロトコルを選択します。</p>

<p>以下のクライアントで動作確認できました。</p>

<ul>
<li>Android 4.2 + XBMC 12.2</li>
<li>Android-x86 4.0 + XBMC 13.0 alpha10</li>
<li>Ubuntu GNOME 14.04 alpha1 + XBMC 12.0</li>
</ul>


<p>Linux の場合はsshfs でマウントしておいた方が何かと便利</p>

<p><code>bash
$ ssh-keygen
$ ssh-copy-id -i .ssh/id_rsa.pub useranme@hostname -p 22222
</code></p>

<p><code>gnome-session-properties</code> で自動起動するアプリケーションに以下を追加</p>

<p><code>bash
sshfs username@hostname:/mnt/common /mnt/common -p 22222 -o reconnect
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SteamOS]]></title>
    <link href="http://ktkr3d.github.io/blog/2013/12/14/steamos/"/>
    <updated>2013-12-14T22:55:00+09:00</updated>
    <id>http://ktkr3d.github.io/blog/2013/12/14/steamos</id>
    <content type="html"><![CDATA[<p><a href="http://ktkr3d.github.io/images/SteamOS-desktop.png"><img src="/images/SteamOS-desktop.png"></a></p>

<p><a href="http://store.steampowered.com/steamos/">http://store.steampowered.com/steamos/</a></p>

<p><a href="https://gist.github.com/voltagex/7955961">https://gist.github.com/voltagex/7955961</a></p>

<p><a href="http://www.redgamingtech.com/how-to-install-steamos-on-virtual-box-virtual-machine/">http://www.redgamingtech.com/how-to-install-steamos-on-virtual-box-virtual-machine/</a></p>

<p>SteamOS のベータ版がリリースされたので、インストールしてみました。</p>

<!-- more -->


<p><a href="http://ktkr3d.github.io/images/steamos.png"><img src="/images/steamos_tn.png"></a></p>

<p>SteamOS はDebian ベースのようです。
手順にしたがってISO に変換して仮想環境にインストールしてみました。
たまたま外出中で手元にPC がないので、スマートフォンから自宅のLinux マシンにVNC over SSH で繋いで作業してみました。ソフトキーボードは面倒ですね。</p>

<p>PrintScreen キーが使えなかったので、xwd を使いましたが、画像が少し変です。</p>

<p><a href="http://ktkr3d.github.io/images/SteamOS-login.png"><img src="/images/SteamOS-login.png"></a></p>

<p>``` sh</p>

<h1>uname -a</h1>

<p>Linux steamos 3.10-3-amd64 #1 SMP Debian 3.10.11-1st1 (2013-11-15) x86_64 GNU/Linux</p>

<h1>gnome-shell &mdash;version</h1>

<p>GNOME Shell 3.4.2
```</p>

<h4>魔改造</h4>

<p>``` text /etc/apt/sources.list
deb <a href="http://ftp.jp.debian.org/debian">http://ftp.jp.debian.org/debian</a> stable main contrib non-free
deb-src <a href="http://ftp.jp.debian.org/debian">http://ftp.jp.debian.org/debian</a> stable main contrib non-free</p>

<p>deb <a href="http://ftp.debian.org/debian/">http://ftp.debian.org/debian/</a> wheezy-updates main contrib non-free
deb-src <a href="http://ftp.debian.org/debian/">http://ftp.debian.org/debian/</a> wheezy-updates main contrib non-free</p>

<p>deb <a href="http://security.debian.org/">http://security.debian.org/</a> wheezy/updates main contrib non-free
deb-src <a href="http://security.debian.org/">http://security.debian.org/</a> wheezy/updates main contrib non-free
```</p>

<p><a href="http://ktkr3d.github.io/images/SteamOS-japanese.png"><img src="/images/SteamOS-japanese.png"></a></p>

<p>``` text /etc/apt/sources.list
deb <a href="http://ftp.jp.debian.org/debian">http://ftp.jp.debian.org/debian</a> experimental main contrib non-free
deb-src <a href="http://ftp.jp.debian.org/debian">http://ftp.jp.debian.org/debian</a> experimental main contrib non-free</p>

<p>deb <a href="http://ftp.debian.org/debian/">http://ftp.debian.org/debian/</a> -updates main contrib non-free
deb-src <a href="http://ftp.debian.org/debian/">http://ftp.debian.org/debian/</a> -updates main contrib non-free</p>

<p>deb <a href="http://security.debian.org/">http://security.debian.org/</a> /updates main contrib non-free
deb-src <a href="http://security.debian.org/">http://security.debian.org/</a> /updates main contrib non-free
```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu GNOME + GNOME3 PPA]]></title>
    <link href="http://ktkr3d.github.io/blog/2013/12/01/ubuntu-gnome-plus-gnome3-ppa/"/>
    <updated>2013-12-01T10:25:00+09:00</updated>
    <id>http://ktkr3d.github.io/blog/2013/12/01/ubuntu-gnome-plus-gnome3-ppa</id>
    <content type="html"><![CDATA[<p>Ubuntu GNOME にGNOME3 関連PPA を継ぎ足すのですが、各PPA に含まれるパッケージおよびそのバージョンに凸凹があったので、整理してみました。</p>

<!-- more -->


<h4>GNOME3 関連PPA</h4>

<ul>
<li>ppa:gnome3-team/gnome3-staging</li>
<li>ppa:gnome3-team/gnome3-next</li>
<li>ppa:ricotz/testing</li>
</ul>


<h4>Ubuntu GNOME 13.10 + GNOME3 PPA</h4>

<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">Staging</th>
<th align="left">Next</th>
<th align="left">Testing</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">clutter</td>
<td align="left">1.14.4</td>
<td align="left">1.14.4</td>
<td align="left">1.14.5</td>
</tr>
<tr>
<td align="left">gnome-control-center</td>
<td align="left">3.10.1</td>
<td align="left">&ndash;</td>
<td align="left">&ndash;</td>
</tr>
<tr>
<td align="left">gnome-desktop3</td>
<td align="left">3.10.1</td>
<td align="left">&ndash;</td>
<td align="left">&ndash;</td>
</tr>
<tr>
<td align="left">gnome-shell</td>
<td align="left">3.10.2.1</td>
<td align="left">3.10.1</td>
<td align="left">3.11.2</td>
</tr>
<tr>
<td align="left">gnome-tweak-tool</td>
<td align="left">3.10.1</td>
<td align="left">&ndash;</td>
<td align="left">3.9.0</td>
</tr>
<tr>
<td align="left">gtk+3.0</td>
<td align="left">3.10.5</td>
<td align="left">3.10.4</td>
<td align="left">3.11.3</td>
</tr>
<tr>
<td align="left">mutter</td>
<td align="left">3.10.1.1</td>
<td align="left">3.10.1.1</td>
<td align="left">3.11.2</td>
</tr>
</tbody>
</table>


<h4>Ubuntu GNOME 14.04 + GNOME3 PPA</h4>

<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">Staging</th>
<th align="left">Next</th>
<th align="left">Testing</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">clutter</td>
<td align="left">1.16.0</td>
<td align="left">&ndash;</td>
<td align="left">1.14.5</td>
</tr>
<tr>
<td align="left">gnome-control-center</td>
<td align="left">&ndash;</td>
<td align="left">&ndash;</td>
<td align="left">&ndash;</td>
</tr>
<tr>
<td align="left">gnome-desktop3</td>
<td align="left">3.11.1</td>
<td align="left">&ndash;</td>
<td align="left">3.10.0</td>
</tr>
<tr>
<td align="left">gnome-shell</td>
<td align="left">3.10.2.1</td>
<td align="left">&ndash;</td>
<td align="left">3.11.2</td>
</tr>
<tr>
<td align="left">gnome-tweak-tool</td>
<td align="left">&ndash;</td>
<td align="left">&ndash;</td>
<td align="left">&ndash;</td>
</tr>
<tr>
<td align="left">gtk+3.0</td>
<td align="left">3.11.2</td>
<td align="left">&ndash;</td>
<td align="left">3.11.3</td>
</tr>
<tr>
<td align="left">mutter</td>
<td align="left">3.10.1.1</td>
<td align="left">&ndash;</td>
<td align="left">3.11.2</td>
</tr>
</tbody>
</table>


<h4>まとめ</h4>

<p>現時点でUbuntu GNOME 14.04 の環境を新しいパッケージで整えるとしたら、Staging + Testing を基本として、13.10 のStaging からgnome-control-center とgnome-tweak-tool を入れるのが良さそうです。
混ぜると危険な気もしますけど。</p>
]]></content>
  </entry>
  
</feed>
